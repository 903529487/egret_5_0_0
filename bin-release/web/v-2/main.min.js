var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Http=function(){function e(){}return e.prototype.get=function(e){var t=this,n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT;var o="";return e.data&&(o=this.formatData(e.data,"get")),n.open(e.url+"?"+o,egret.HttpMethod.GET),n.send(),new Promise(function(e,o){n.addEventListener(egret.Event.COMPLETE,function(t){var n=t.currentTarget;e(JSON.parse(n.response))},t),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){var t=e;console.log("get data : ",t),o(t)},t)})},e.prototype.post=function(e){var t=this,n=new egret.HttpRequest;n.responseType=egret.HttpResponseType.TEXT;var o="";return e.data&&(o=this.formatData(e.data,"post")),n.open(e.url,egret.HttpMethod.POST),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o),new Promise(function(e,o){n.addEventListener(egret.Event.COMPLETE,function(t){var n=t.currentTarget;e(JSON.parse(n.response))},t),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){var t=e;console.log("get data : ",t),o(t)},t)})},e.prototype.formatData=function(e,t){var n=[];for(var o in e)n.push(o+"="+e[o]);var r="";return r=n.join("&")},e}();__reflect(Http.prototype,"Http");var Hint=function(e){function t(){var t=e.call(this)||this;return t.W=750,t.H=1220,t}return __extends(t,e),t.prototype.toast=function(e){var t=new egret.DisplayObjectContainer;t.anchorOffsetX=this.W/2,t.anchorOffsetY=this.H/2,t.x=this.W/2,t.y=this.H/2,this.addChild(t);var n=new eui.Label(e),o=new egret.Sprite;o.graphics.beginFill(0),o.graphics.drawRoundRect(0,0,n.width+60,50,10),o.graphics.endFill(),o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,t.addChild(o),o.alpha=.6,o.x=this.W/2,o.y=this.H/2,t.addChild(n),n.textColor=16777215,n.textAlign="center",n.anchorOffsetX=n.width/2,n.anchorOffsetY=n.height/2,n.x=this.W/2,n.y=this.H/2,t.alpha=0,t.scaleX=0,t.scaleY=0,this.animation(t)},t.prototype.loading=function(){var e=this,t=new egret.DisplayObjectContainer;t.anchorOffsetX=this.W/2,t.anchorOffsetY=this.H/2,t.x=this.W/2,t.y=this.H/2;var n=new eui.Rect(this.W,this.H,0);t.addChild(n),n.alpha=.01;var o=new egret.DisplayObjectContainer;o.anchorOffsetX=this.W/2,o.anchorOffsetY=this.H/2,o.x=this.W/2,o.y=this.H/2,t.addChild(o);var r=new egret.Sprite;r.graphics.beginFill(0),r.graphics.drawRoundRect(0,0,300,300,20),r.graphics.endFill(),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,o.addChild(r),r.x=this.W/2,r.y=this.H/2,r.alpha=.6;var i=new egret.Bitmap(RES.getRes("loading_png"));o.addChild(i),i.x=this.W/2,i.y=this.H/2-20,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2;var a=new eui.Label("加载中");a.textColor=16777215,a.textAlign="center",a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=this.W/2,a.y=this.H/2+100,o.addChild(a);var s={open:function(){e.addChild(t),o.scaleX=0,o.scaleY=0,egret.Tween.get(o).to({scaleX:1,scaleY:1},300,egret.Ease.sineOut),egret.Tween.get(i,{loop:!0}).to({rotation:360},2e3,egret.Ease.quadOut)},close:function(){egret.Tween.get(o).to({scaleX:0,scaleY:0},300,egret.Ease.quadOut).call(function(){egret.Tween.removeTweens(i),e.removeChild(t)})}};return s},t.prototype.animation=function(e){var t=this;egret.Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},300,egret.Ease.quadOut).wait(1500).to({scaleX:1.1,scaleY:1.1,alpha:1},100,egret.Ease.quadOut).to({scaleX:0,scaleY:0,alpha:0},400,egret.Ease.quadOut).call(function(){t.removeChild(e)})},t}(egret.DisplayObjectContainer);__reflect(Hint.prototype,"Hint");var SceneManage=function(e){function t(){var t=e.call(this)||this;return t.W=750,t.H=1220,t.lastPageEgret=null,t.newPageEgret=null,t.lastPage=null,t.newPage=null,t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=new egret.Sprite;e.graphics.beginFill(0),e.graphics.drawRect(0,0,this.W,this.H),e.graphics.endFill(),this.addChild(e)},t.prototype["delete"]=function(){},t.prototype.to=function(e){var t=this;this.newPageEgret&&(this.lastPageEgret=this.newPageEgret,this.lastPage=this.newPage,egret.Tween.removeAllTweens(),this.lastPage.close());var n=new egret.DisplayObjectContainer;this.addChild(n);var o=new egret.Sprite;o.graphics.beginFill(0),o.graphics.drawCircle(0,0,this.H/2+100),o.graphics.endFill(),o.scaleX=0,o.scaleY=0,o.x=this.W/2,o.y=this.H/2;egret.Tween.get(o).to({scaleX:1,scaleY:1},500,egret.Ease.quadOut).call(function(){n.removeChild(o),t.lastPageEgret&&(t.removeChild(t.lastPageEgret),t.lastPageEgret=null)}),n.mask=o,n.addChild(e),n.addChild(o),this.newPageEgret=n,this.newPage=e},t}(egret.DisplayObjectContainer);__reflect(SceneManage.prototype,"SceneManage");var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.stage.addChild(globals.$sceneManage),this.stage.addChild(globals.$hint),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.LoadingComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.LoadingResourceError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading"),this.createScene()},t.prototype.LoadingComplete=function(e){if("loading"==e.groupName){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.LoadingComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.LoadingResourceError,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.onPrelaoad(),console.log("Sdsdsdd");var t=new Loading;this.loadingView=t,globals.$sceneManage.to(t)}},t.prototype.LoadingResourceError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.LoadingComplete(e)},t.prototype.onPrelaoad=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.loadingView=null,RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.onProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugGlobal=function(){function e(){this.$view={W:750,H:1220},this.$sceneManage=new SceneManage,this.$hint=new Hint,this.$http=new Http}return e}();__reflect(DebugGlobal.prototype,"DebugGlobal",["Global"]),window.globals||(window.globals=new DebugGlobal);var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var List=function(e){function t(){var t=e.call(this)||this;t.skinName="List_eui",t.list_box.alpha=0;var n=[{name:"小裤裤扩扩",value:"Sdwwwww"},{name:"小裤裤扩扩",value:"Sdwwwww"}];return t.collection=new eui.ArrayCollection,t.collection.source=n,t.listc.dataProvider=t.collection,t.listc.height=1200,t.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.linkto,t),t}return __extends(t,e),t.prototype.linkto=function(){console.log("Sdsdsd"),egret.Tween.get(this.list_box).to({alpha:1},500,egret.Ease.quadOut)},t.prototype.close=function(){},t}(eui.Component);__reflect(List.prototype,"List");var Loading=function(e){function t(){var t=e.call(this)||this;return t.skinName="Loading_eui",t.play(),t}return __extends(t,e),t.prototype.play=function(){this.kk.addEventListener("complete",this.onTweenGroupComplete,this),this.kk.addEventListener("itemComplete",this.onTweenItemComplete,this),this.kk.play()},t.prototype.onTweenGroupComplete=function(){console.log("TweenGroup play completed.")},t.prototype.onTweenItemComplete=function(e){var t=e.data;console.log(t.target),console.log("TweenItem play completed.")},t.prototype.onProgress=function(e,t){var n=Number(e/t*100).toFixed(0);this.textFtestield.text=n+"%","100"===n&&setTimeout(function(){globals.$sceneManage.to(new Page1)},400)},t.prototype.close=function(){},t}(eui.Component);__reflect(Loading.prototype,"Loading");var Page1=function(e){function t(){var t=e.call(this)||this;t.skinName="Page1_eui",t.bg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.linkto,t),t.anxx.addEventListener("complete",function(){t.anxx.play(0),console.log("Sdwww")},t),setTimeout(function(){t.anxx.play(0)},10);var n=new egret.Bitmap(RES.getRes("p0_music_png"));return t.addChild(n),t}return __extends(t,e),t.prototype.linkto=function(){var e=RES.getRes("nn_json"),t=RES.getRes("nn_png"),n=new egret.MovieClipDataFactory(e,t),o=new egret.MovieClip(n.generateMovieClipData("nn"));o.play(-1),this.addChild(o)},t.prototype.close=function(){console.log("关闭page")},t}(eui.Component);__reflect(Page1.prototype,"Page1");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Uploading=function(){function e(e){this.file=window.document.getElementById("file"),this.file.click(),this.file.addEventListener("change",function(t){var n=t.target.files||t.dataTransfer.files,o=new FileReader;o.readAsDataURL(n[0]),o.onload=function(t){var n=t.target.result,o=new Image;o.src=n,o.onload=function(){var t=new egret.Texture,n=new egret.BitmapData(o);t.bitmapData=n;var r=new egret.Bitmap(t);console.log(r),e&&e(r)}}},!1)}return e}();__reflect(Uploading.prototype,"Uploading");